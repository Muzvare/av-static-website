<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>MediaWiki</title>

    <!-- Bootstrap Core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91621093-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>
<body class="x2017 x2017_04 x2017_04_26 x2017_04_26_mediawiki x2017_04_26_mediawiki_index">
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/#page-top"><img width="175" src="/images/av-logo-inverse.png" /></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="/#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#why-us">Why us?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#case-studies">Case Studies</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#subscribe">Subscribe</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
<section id="blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-2">
      </div>
      <div class="col-lg-8 text-left">
        <h2 class='title'><a href="/2017/04/26/mediawiki/">MediaWiki</a></h2>
        <h5 class='date'>26 Apr 2017</h5>
    <p><img alt="mediawiki" src="/images/MediaWiki.svg" /></p>

<p>Having estsablished that MediaWiki&rsquo;s default and visual editors both worked smoothly on the NHS laptops on the NHS intranet, it seemed pretty much wrapped up that we&rsquo;d be using MediaWiki for the NHS Social Prescribing project.  The question then became whether we should host it ourselves or use a third party hosting service.  The main MediaWiki site provides a <a href="https://www.mediawiki.org/wiki/Hosting_services">list of hosting services</a> which are sortable in terms of different features.  I pulled out all the offerings that included visual editor support:</p>

<ul>
<li><a href="http://meta.miraheze.org/">Miraheze</a></li>
<li><a href="http://www.mywikis.com/">MyWikis</a></li>
<li><a href="https://wiki-valley.com/">Wiki Valley</a></li>
<li><a href="https://www.wikibase.nl/Diensten/Managed_hosting">Wikibase solutions</a></li>
</ul>

<p>The list also included Wikia and Gamepedia, both free with advertising and both targeting the video-game/entertainment market.  Possible, but long shots I thought; for healthcare we&rsquo;d want a more serious tone.  I contacted all four of the organisations on the list above to try and get set up with a test wiki with a visual editor installed.  Miraheze&rsquo;s site didn&rsquo;t immediately load so I got on to the others.</p>

<p>MyWikis gave me access to their testing wiki sandbox which had the visual editor; but it got stuck loading on all the browsers I tried and although they responded to my help request reasonably promptly, their suggestion that I should try browser refreshes until it worked was not very helpful.  Wiki Valley responded to my request to say they would create a dedicated demo wiki for us as well as giving us access to a sandbox, but I still haven&rsquo;t managed to edit a page anywhere despite several attempts.  The notification emails and the site are in French and they&rsquo;re not filling me with confidence.</p>

<p>Wikibase didn&rsquo;t want to provide a demo environment and said that they only minimally support the visual editor. Instead they focus on semantic wiki and page forms as that&rsquo;s what they&rsquo;re saying their users want.  Sounds like an interesting future possibility (submitting data to wikis via forms) but not the best short term option.  Conversely, Miraheze is a volunteer-run system receiving donations to pay for hosting and have no guarantees of service in their terms and conditions, but they have actually been the fastest to set up a working test site for us and the only MediaWiki hosting service to get us a working visual editor so far.  I had to log into a separate feature requesting system (Phabricator) to get the visual editor enabled, and their site has been responsive all week since that outage I experienced the first time I went to their main site.</p>

<p>In parallel I used <a href="https://bitnami.com/stack/mediawiki">Bitnami</a> which allowed a very simple deploy to our own MediaWiki instance on Azure where we can config the MediaWiki directly, and I was able to adjust the main logo and do some preliminary testing.</p>

<p>I&rsquo;m honing in on a set of technical features we need to support the higher level project requirements:</p>

<ul>
<li>WYSIWYG editor (optional initially, but might be crucial down the line &hellip;)</li>
<li>Can disable anonymous edits</li>
<li>File upload</li>
<li>Custom domain</li>
<li>Can we insert custom HLP header to make it look like part of HLP site &hellip;?</li>
<li>HTTPS &hellip;</li>
<li>moderation support</li>
</ul>

<p>I think my next priority must be to request all the additional features enabled we need in the hlptest.miraheze.org MediaWiki, and then see how quickly I can set them up in parallel on our own server.  I started by <a href="https://phabricator.miraheze.org/T1720">requesting the disabling of anonymous edits</a>:</p>

<p><img alt="requesting disabling of anonymous edits on miraheze via phabricator" src="https://www.dropbox.com/s/ecfs2s49des8xmj/Screenshot%202017-04-26%2009.46.45.png?dl=1" /></p>

<p>So let&rsquo;s see how quickly I can do this on our Bitnami/Azure system.  First I need to log in to <a href="azure.bitnami.com">azure.bitnami.com</a>, which gives me a screen showing both the link to our running instance, and the ssh credentials I need to ssh directly into the box where I can edit the mediawiki settings.  I&rsquo;d previously updated the logo by editing <code>/apps/mediawiki/htdocs/LocalSettings.php</code>.  So I went back there to try to disable anonymous edits:</p>

<p><a href="https://www.mediawiki.org/wiki/Manual:Preventing_access#Restrict_anonymous_editing">https://www.mediawiki.org/wiki/Manual:Preventing<em>access#Restrict</em>anonymous_editing</a></p>

<p>This time I needed to go to <code>includes/DefaultSettings.php</code> and set the following:</p>
<pre class="highlight plaintext"><code>$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['*']['createpage'] = false;
</code></pre>
<p>and I had successfully disabled the ability of anonymous users to edit existing pages or create new pages.  Meanwhile I&rsquo;m waiting for Miraheze to process my request.  I might rue the day since it may well be a total pain to set up the visual editor or SSL on our Bitnami/Azure hosted system, but I don&rsquo;t think we can use Miraheze for anything other than testing purposes, since we&rsquo;ll need server side access to fix things ourselves in a hurry if we have a specific request from the NHS team.</p>

<p>Maybe ideally I&rsquo;d now spend the rest of the day working through all the other features in turn.  In the first instance I think I&rsquo;ll just request them all from Miraheze and then see if I can knock off a couple of other low hanging fruit on Azure/Bitnami.  Although as I look I see that file upload appears to be enabled by default, and there are just restrictions about which sorts of files can be uploaded.  HLP is asking about uploading Excel files, which sounds like something we can easily add later as needed.</p>

<p>Miraheze has a <a href="https://meta.miraheze.org/wiki/Custom_domains">whole page on how to request custom domains</a>.  I don&rsquo;t know when an HLP subdomain will be created for us, so it&rsquo;s expedient to see if we can set up subdomains on av.org and see if we can get our Bitnami/Azure box hooked up like that.  That reminds me we will really need SSL (something Miraheze has out of the box), and in general we need to improve our Azure admin skills.  If only AWS or DO had given us similar nonprofit credit schemes &hellip; guess I could try a Bitnami deploy to AWS and taking the financial hit, but we do need to skill up in Azure admin for the AsyncVoter project and to take advantage of the credits from MicroSoft.</p>

<p>So I&rsquo;ve set up <a href="http://hlp-wiki.agileventures.org">http://hlp-wiki.agileventures.org</a> to point to our Azure/Bitnami system, and we&rsquo;ll see if that works, but we&rsquo;ll have to wait for the zone file to propagate.  For stability we&rsquo;ll need to reserve the IP address which requires powershell installation.  I also see an article for <a href="https://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-configure-ssl-certificate">ssl setup</a>.  It might be painful but I think we can get that all done.  The other things to impale ourselves on are setting up the WYSIWYG editor, working out the moderation strategy and whether/how we can have an HLP banner across the top of the wiki &hellip; stay tuned for all those fun and frolics in the coming days.</p>

        <h2 class='author'>by Sam Joseph</h2>
      </div>  
      <div class="col-lg-2">
      </div>
    </div>  
  </div>  
</section>  
<footer>
    <div class="container">
        <section id="contact">
        <div class="row">
            <div class="col-md-4">
                <h3>AgileVentures</h3>
                <p class="blurb text-muted">Our purpose is to develop better more affordable software solutions to enable non-profits to be more effective and more efficient. We also host a <a href="http://www.agileventures.org">learning community</a> around <a href="https://www.edx.org/xseries/agile-development-using-ruby-rails">free online courses</a> that enable developers to improve their team and software skills, and then to apply them on socially useful projects for non-profits. We are a Charitable Incorporated Organisation (CIO) in the UK. Ref #1170963</p>
            </div>
            <div class="col-md-4">
                <h3>What we do</h3>
                <div class="list">
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Websites</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Apps</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Process Automation</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Software Projects</span></i>
                </div>
                <h4>More on our <a href="/blog">Blog</a></h4>
            </div>
            <div class="col-md-4">
                <h3>Contact Us</h3>
                <div class="contact-list">
                  <!-- <i class="fa fa-envelope fa-lg fa-text fa-fw"><span class='font-override'>&nbsp;&nbsp;</i> -->
                  <i class="fa fa-lg fa-text"><a class='mail' href='mailto:nonprofits@agileventures.org'>nonprofits@<wbr>agileventures.org</a></span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>AgileVentures</span></i>
                  <!-- <i class="fa fa-map-marker fa-lg fa-text fa-fw"></i> -->
                  <i class="fa fa-lg fa-text"><span class='font-override'>The Lodge</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>64 Pinner Road</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>Harrow, HA1 4HZ</span></i>
                </div>
            </div>
        </div>
        </section>
        <div class="row">
            <div class="col-md-4">
                <ul class="list-inline quicklinks">
                    <li><a href="/privacy">Privacy Policy</a>
                    </li>
                    <li><a href="/terms">Terms of Use</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <span class="copyright">Copyright &copy; AgileVentures 2017</span>
            </div>
            <div class="col-md-4">
                <ul class="list-inline social-buttons">
                    <li><a href="https://twitter.com/AgileVentures"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li><a href="https://www.facebook.com/agileventures"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/agileventures"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </section>
</footer>


</body>
</html>
