<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Breakthough Anxiety</title>

    <!-- Bootstrap Core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91621093-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>
<body class="x2017 x2017_04 x2017_04_21 x2017_04_21_breakthrough-anxiety x2017_04_21_breakthrough-anxiety_index">
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/#page-top"><img width="175" src="/images/av-logo-inverse.png" /></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="/#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#why-us">Why us?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#case-studies">Case Studies</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#subscribe">Subscribe</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
<section id="blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-2">
      </div>
      <div class="col-lg-8 text-left">
        <h2 class='title'><a href="/2017/04/21/breakthrough-anxiety/">Breakthough Anxiety</a></h2>
        <h5 class='date'>21 Apr 2017</h5>
    <p><img alt="breakthrough" src="/images/breakthrough.jpg" /></p>

<p>I just burnt 15 minutes taking out the recycling, replenishing the water bottles on my desk and discussing with my wife about Japanese textbooks for my kids.  Well not burnt :-) Time spent - all needed to be done.  If I&rsquo;d been slightly more organised I&rsquo;d have gotten my eldest son to take out the recycling this morning.  The strange thing about being a parent is that getting time when you&rsquo;re not being pestered or interrupted is quite hard.  All my boys are at school now - I get a certain amount of time in the day when I can focus on my computer in my home office where I have two external screens and I can work &ldquo;efficiently&rdquo;.  The &ldquo;in the momment&rdquo; philosophy suggests to me that it&rsquo;s a little silly to consider time as burnt or lost; at the same time I do want to bring in money to feed my kids, and that seems to require focused time getting work done.  That said and despite my best efforts at prioritisiing, I&rsquo;m still not sure if I&rsquo;m really focusing properly on what will bring home the bacon.</p>

<p>Having used up a lot of my savings to work on AgileVentures full time for the last year I am definitely in a bit of an anxious state.  I did achieve a couple of breakthroughs yesterday that did help to lighten my mood.  One was to find a WYSIWYG editor that worked on the NHS laptops.  The other was to resurrect the autograders for the AV102 TA training course.  Both are good stories I&rsquo;d like to blog out.  I also note that I&rsquo;m well behind on reviewing LocalSupport pull requests and many other things.  I&rsquo;m torn about whether to use the blogging time to force a focus on catching up with AgileVentures Premium related work (e.g. pull requests) and reporting on the breakthroughs.  Let&rsquo;s focus on the breakthroughs for the purpose of self-documentation and I&rsquo;ll get to the pull requests in the next chunk of my day and blog about them Monday.</p>

<p>So, I was at the NHS head office again yesterday for a meeting with a member of the communications team, which was a critical meeting and very positive.  The communications person was enthusiastic about the proposed social-prescription wiki, and naturally concerned that many of the stakeholders might find it difficult to contribute.  More on the details of that meeting soon, but just after the meeting I was able to sit down with an NHS laptop (with IE 11 on the NHS intranet) and review the problematic interface issues we&rsquo;d seen in the usability sessions a fortnight before.  For the usability testing we&rsquo;d selected three different wikis and tested them on NHS staff computers.  The wikis had worked, but the key problem across all three instances (PBwiki, XWiki, BlueSpice) was that certain key icons just didn&rsquo;t show up:</p>

<p><img alt="XWiki icons not showing up" src="https://www.dropbox.com/s/il7lzum1kbx6ev3/Screenshot%202017-04-21%2009.40.08.png?dl=1" /></p>

<p>In the above image you can see how the login panel for XWiki looks on my Mac, and on the left you can see how it looks in IE11 on the NHS laptops.  The icons are missing.  Now that&rsquo;s not the end of the world for this login panel, but it&rsquo;s actually catastrophic in terms of usability for the rest of the XWiki, and not just XWiki, but also PBWorks and BlueSpice.   The XWiki &ldquo;hamburger&rdquo; drawer icon that serves to indicate where to open the login panel is not visible on the NHS laptops, so you can&rsquo;t login without someone standing next to you telling you where to click.  On PBworks and BlueSpice the icons are used to indicate the place to click to start editing, or to use various text font and styling buttons.  Here&rsquo;s an example from BlueSpice, which for some reason had also switched to Russian:</p>

<p><img alt="BlueSpice text editing toolbar on the NHS laptop" src="https://www.dropbox.com/s/dpc9vqhyj0yzgl6/Screenshot%202017-04-21%2009.45.05.png?dl=1" /></p>

<p>Interestingly all these icons loaded correctly on a virtualized IE 11 on my laptop running over the NHS guest wifi.  The failure of the icons to show up was only happening on the NHS laptops hard linked to their internal network.  What I really should have done was tethered one of their laptops to my wifi hotspot on my phone to further isolate the problem, but I was out of time, and the suggestions from XWiki support, such as clearing the browser cache, were not possible on the sys-admin restricted NHS laptops.  I took lots of screenshots, dumped network interactions and noted that the failures for XWiki were for the Glyphicons, for PBwiki they were font-awesome icons, and for BlueSpice they were MCE Editor icons.  It was a dark moment - in my desparation I tried loading Wikipedia on the NHS laptop, and the icons in their basic editor showed up!</p>

<p><img alt="wikipedia basic editor working" src="https://www.dropbox.com/s/2kwtz5ebey0jmug/Screenshot%202017-04-21%2009.49.52.png?dl=1" /></p>

<p>I investigated the source and found that they were using background images rather than icons.  I&rsquo;d initially ruled out a pure mediawiki offering, with the special mediawiki syntax as being too confusing for the majority of stakeholders, but I noticed that Wikipedia offered a visual editor solution that also worked on the NHS laptop:</p>

<p><img alt="wikipedia visual editor" src="https://www.dropbox.com/s/5ltrfl1c0ha10cy/Screenshot%202017-04-21%2009.52.42.png?dl=1" /></p>

<p>Did we have a winner?  At least I had an angle of attack.  If MediaWiki actually worked on NHS laptops then it was streets ahead of any other solution we&rsquo;d tested so far, regardless of any other shortcomings.  Still lots to work out, but light at the end of the tunnel, perhaps?</p>

<p>So that was one breakthrough.  The trip into London for the NHS meeting and then the laptop research, getting home, investigating options for MediaWiki hosting left me having spent no time on my other major blocker which was that the legacy autograders for the AV102 TA training course weren&rsquo;t working.  I&rsquo;d logged into the grader earlier in the week and got the following message:</p>
<pre class="highlight plaintext"><code>The queue name is BerkeleyX-cs169x
/home/ubuntu/rag/lib/edx_controller.rb:74:in `get_queue_length': Bad queue length response:  (EdXController::BadStatusCodeError)
        from /home/ubuntu/rag/lib/edx_client.rb:242:in `each_submission'
        from /home/ubuntu/rag/lib/edx_client.rb:49:in `run'
        from ./run_edx_client.rb:9:in `&lt;main&gt;'
</code></pre>
<p>Over and over.  The AV102 grader hadn&rsquo;t been updated to the new version that UCBerkeley students created the summer before last.  I&rsquo;d fixed the AV102 grader to keep running, about the same time last year, by hacking away at the authentication code, and I wasn&rsquo;t optimistic that I could fix it again.  The &ldquo;sensible&rdquo; path would be taking all the AV102 assignments and converting their specifications to work with the new grader and then pointing the AV102 course on edX to a new grader instance.  The problem with that path is that it felt like it would be multiple hours work, with no guarantee of success.  In principle the new grader system is supposed to allow us to insert new assignments more easily - the assignment specification can be located in GitHub and be sent to the grader via the edX course itself.  I&rsquo;m 90% sure that I could get it all working, but it feels like it would take a few hours, with bumps and starts, and I didn&rsquo;t have a few hours.  Or at least didn&rsquo;t feel like I could make space for them.</p>

<p>I prodded at the failing grader code for five minutes and saw that the problem on the legacy grader was again an authentication issue.  The initial authentication step was not working, causing the request to the edX queues to be redirected to login.  This was exactly the problem I&rsquo;d fixed a couple of times before in under an hour of debugging, and the exciting thing in both those cases was that all the existing infrastructure would then start working.  No need to convert multiple assignments to a different format etc.  However the day was at an end, and my physio had now cleared me to join in my sons&rsquo; karate classes.  What to do?  I took my laptop to Karate and sat out.  Fortuitously, just as the Karate class was finishing and I had to take my sons home, I&rsquo;d done it again.  Analysing how mechanise (which the TAs had used in the new grader) was successfully authenticating on the new grader develop server, I saw that again we had a problem in the legacy code as to how the &ldquo;Set-Cookie&rdquo; operation was being interpreted.  Here&rsquo;s what the edX queues was sending back in response to authentication requests:</p>
<pre class="highlight plaintext"><code>"set-cookie"=&gt;"csrftoken=kFWOZK6FnT....eLAvMDsyi; expires=Thu, 19-Apr-2018 17:15:44 GMT; Max-Age=31449600; Path=/, sessionid=y4i9hip...j3x1i; expires=Thu, 04-May-2017 17:15:44 GMT; httponly; Max-Age=1209600; Path=/, AWSELB=E7E741EF08F209.....E1C1FA69F3B681EB87F2DFC9E7C01B23665183B022A6A8E876;PATH=/", "vary"=&gt;"Accept-Encoding, Cookie", "content-length"=&gt;"61", "connection"=&gt;"keep-alive"}
</code></pre>
<p>With debugging hooks going down through a couple of gems, I determined that the working mechanise based grader was only setting the csrftoken, sessionid and AWSELB elements of the set cookie request.   I got the same effect on the legacy code with a really messy hack:</p>
<pre class="highlight plaintext"><code>@session_cookie = all_cookies.scan(/[\d\w]+\=[\d\w]+/).select{|str| str.start_with?('AWSELB') ||str.start_with?('csrftoken') || str.start_with?('sessionid')}.join('; ')
</code></pre>
<p>but it worked - suddenly the AV102 homeworks were grading successfully.  Such a mess, and it could have been concealing many other bugs behind the authentication failure, but I gambled and won on this occasion.  I&rsquo;m not getting paid anything to work on this code or run the AV102 training course.  It would be hugely beneficial for the long term of the autograder project if I was regularly inserting new assignments into the new system, documenting the process and smoothing off the rough edges, but again, no one is paying for that.  Or at least, no one is paying me for that.  I do get a share of the proceeds of the sales of the relaeted textbook (since I&rsquo;m the editor) and part of my responsibility is to keep the graders running on the main course and the SPOC, but the TA training course is my own separate initiative.  Ironically this messy hack in 45 minutes in my free time while my kids do Karate will keep the AV102 TA training course running for a little longer.  I haven&rsquo;t even had time to take the debugger statements out of the develop grader (although a git checkout should sort that).</p>

<p>Two breakthroughs, but I&rsquo;m still anxious.  Is this hack to keep AV102 running a wonderful piece of pragmatism, or is it the technical debt that breaks the camel&rsquo;s back?  Can I find a good MediaWiki hosting provider or will we have to host ourselves?  Lots of deep breaths, nose to the grindstone, enjoy the moment! :-)</p>

<h3>Related Videos</h3>

<ul>
<li><a href="https://www.youtube.com/edit?o=U&amp;video_id=OFKKyZbJqlk">&ldquo;Kent Beck&rdquo; Scrum</a></li>
</ul>

        <h2 class='author'>by Sam Joseph</h2>
      </div>  
      <div class="col-lg-2">
      </div>
    </div>  
  </div>  
</section>  
<footer>
    <div class="container">
        <section id="contact">
        <div class="row">
            <div class="col-md-4">
                <h3>AgileVentures</h3>
                <p class="blurb text-muted">Our purpose is to develop better more affordable software solutions to enable non-profits to be more effective and more efficient. We also host a <a href="http://www.agileventures.org">learning community</a> around <a href="https://www.edx.org/xseries/agile-development-using-ruby-rails">free online courses</a> that enable developers to improve their team and software skills, and then to apply them on socially useful projects for non-profits. We are a Charitable Incorporated Organisation (CIO) in the UK. Ref #1170963</p>
            </div>
            <div class="col-md-4">
                <h3>What we do</h3>
                <div class="list">
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Websites</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Apps</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Process Automation</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Software Projects</span></i>
                </div>
                <h4>More on our <a href="/blog">Blog</a></h4>
            </div>
            <div class="col-md-4">
                <h3>Contact Us</h3>
                <div class="contact-list">
                  <!-- <i class="fa fa-envelope fa-lg fa-text fa-fw"><span class='font-override'>&nbsp;&nbsp;</i> -->
                  <i class="fa fa-lg fa-text"><a class='mail' href='mailto:nonprofits@agileventures.org'>nonprofits@<wbr>agileventures.org</a></span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>AgileVentures</span></i>
                  <!-- <i class="fa fa-map-marker fa-lg fa-text fa-fw"></i> -->
                  <i class="fa fa-lg fa-text"><span class='font-override'>The Lodge</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>64 Pinner Road</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>Harrow, HA1 4HZ</span></i>
                </div>
            </div>
        </div>
        </section>
        <div class="row">
            <div class="col-md-4">
                <ul class="list-inline quicklinks">
                    <li><a href="/privacy">Privacy Policy</a>
                    </li>
                    <li><a href="/terms">Terms of Use</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <span class="copyright">Copyright &copy; AgileVentures 2017</span>
            </div>
            <div class="col-md-4">
                <ul class="list-inline social-buttons">
                    <li><a href="https://twitter.com/AgileVentures"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li><a href="https://www.facebook.com/agileventures"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/agileventures"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </section>
</footer>


</body>
</html>
