<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Server Monitoring</title>

    <!-- Bootstrap Core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91621093-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>
<body class="x2017 x2017_01 x2017_01_17 x2017_01_17_server-monitoring x2017_01_17_server-monitoring_index">
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/#page-top"><img width="175" src="/images/av-logo-inverse.png" /></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="/#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#why-us">Why us?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#case-studies">Case Studies</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#subscribe">Subscribe</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
<section id="blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-2">
      </div>
      <div class="col-lg-8 text-left">
        <h2 class='title'><a href="/2017/01/17/server-monitoring/">Server Monitoring</a></h2>
        <h5 class='date'>17 Jan 2017</h5>
    <p><img alt="Server Monitoring" src="/images/server-monitoring.jpg" /></p>

<p>So I&rsquo;m still forcing myself to think about DevOps in preparation for my talk on Thursday.  Other things being equal I&rsquo;d be blogging about our new marketing activities and how Google will potentially give us $10,000 a month of AdWords, and how there might be similar, if less generous, offers from other social media sites.  However, it felt great yesterday when I managed to complete a first draft of the slides for the talk.  There&rsquo;s still a little something missing though; the performance requirements for the different systems.  </p>

<p>What I do know from the metrics we get from Heroku on WebSiteOne is that we regularly exceed our 500MB memory allowance, although the site performance doesn&rsquo;t seem too horrible.  We&rsquo;ve gone in and fixed particularly slow loads on the users, projects and event pages, as well as had a stab at removing gems that seem to be eating up a lot of memory.  We&rsquo;ve improved page load times, but not managed to get the memory usage down.  We could pay to upgrade to the next Heroku tier to get 1GB of memory, but the site performance seems superficially okay - and no one is explicitly complaining about it.  We know that pages need to load as fast as possible in order for people to spend any time on the site. Greater than 4 seconds is likely a big turnoff these days.  The front page appears in about 1.2 seconds when I refresh in Chrome.  Of course it would be slower if not cached.  In incognito mode the entire front page loads in about 2.6 seconds.  That seems acceptable, but I do have a reasonably fast mac.  It might be the case that other folks around the world are experiencing poor performance and we&rsquo;re not aware of it &hellip;</p>

<p>It seems like NewRelic wasn&rsquo;t actually enabled on WebSiteOne production.  The code was all set up, but the NEW RELIC key wasn&rsquo;t in the production settings.  I&rsquo;ve added that now so perhaps we&rsquo;ll see some interesting data.  NewRelic is all set up for LocalSupport, where we can see an overview of the web transaction times:</p>

<p><img alt="NewRelic data from HarrowCN production" src="https://www.dropbox.com/s/myb72nmofhmm7lg/Screenshot%202017-01-17%2010.22.04.png?dl=1" /></p>

<p>Ping requests haven&rsquo;t been working for the last 12 days, and aren&rsquo;t working from the command line either, but the site is up and it looks like pages are being served okay.  I can see a couple of page loads that failed in the last seven days, which is probably acceptable for this low traffic site.  Even if it wasn&rsquo;t, I&rsquo;m not sure how to go from that failure to a fix.  Superficially it would just mean provisioning more dynos or more memory.  At the moment LocalSupport is on a legacy dyno from Heroku, meaning we aren&rsquo;t getting metrics on memory usage as we are for WebSiteOne.</p>

<p>While I&rsquo;ve been writing this, the NewRelic data on WebSiteOne has started coming in:</p>

<p><img alt="NewRelic data from WSO production" src="https://www.dropbox.com/s/s5x799dlbdx4l7z/Screenshot%202017-01-17%2010.28.42.png?dl=1" /></p>

<p>This makes it look like there was at least one frustrated request in the last half an hour at least.  That makes me think fixing our memory issues on WSO might be higher priority.  Looks like some kind of active record lookup was getting stuck &hellip; Going back to HarrowCN, it seems like I can embed a <a href="https://rpm.newrelic.com/public/charts/7odyrRrzsqR">feed of the throughput</a> in an iframe:</p>

<p><img alt="HarrowCN throughput" src="https://www.dropbox.com/s/zzyev88mr4orwbn/Screenshot%202017-01-17%2010.33.07.png?dl=1" /></p>

<p>The baseline requests look like some sort of healthcheck is going on, rather than it being representative of human users &hellip; more investigation required.  I wonder if that&rsquo;s a side effect of NewRelic or some other pinging service we&rsquo;ve forgotten about?  Anyhow, I want to get deeper into this for both WSO and HarrowCN (and AutoGraders/MetPlus) to flesh out what I can say about the usage of our systems in my talk on Thursday.  Let&rsquo;s see how far I get &hellip;</p>

        <h2 class='author'>by Sam Joseph</h2>
      </div>  
      <div class="col-lg-2">
      </div>
    </div>  
  </div>  
</section>  
<footer>
    <div class="container">
        <section id="contact">
        <div class="row">
            <div class="col-md-4">
                <h3>AgileVentures</h3>
                <p class="blurb text-muted">Our purpose is to develop better more affordable software solutions to enable non-profits to be more effective and more efficient. We also host a <a href="http://www.agileventures.org">learning community</a> around <a href="https://www.edx.org/xseries/agile-development-using-ruby-rails">free online courses</a> that enable developers to improve their team and software skills, and then to apply them on socially useful projects for non-profits. We are a Charitable Incorporated Organisation (CIO) in the UK. Ref #1170963</p>
            </div>
            <div class="col-md-4">
                <h3>What we do</h3>
                <div class="list">
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Websites</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Apps</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Process Automation</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Software Projects</span></i>
                </div>
                <h4>More on our <a href="/blog">Blog</a></h4>
            </div>
            <div class="col-md-4">
                <h3>Contact Us</h3>
                <div class="contact-list">
                  <!-- <i class="fa fa-envelope fa-lg fa-text fa-fw"><span class='font-override'>&nbsp;&nbsp;</i> -->
                  <i class="fa fa-lg fa-text"><a class='mail' href='mailto:nonprofits@agileventures.org'>nonprofits@<wbr>agileventures.org</a></span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>AgileVentures</span></i>
                  <!-- <i class="fa fa-map-marker fa-lg fa-text fa-fw"></i> -->
                  <i class="fa fa-lg fa-text"><span class='font-override'>The Lodge</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>64 Pinner Road</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>Harrow, HA1 4HZ</span></i>
                </div>
            </div>
        </div>
        </section>
        <div class="row">
            <div class="col-md-4">
                <ul class="list-inline quicklinks">
                    <li><a href="/privacy">Privacy Policy</a>
                    </li>
                    <li><a href="/terms">Terms of Use</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <span class="copyright">Copyright &copy; AgileVentures 2017</span>
            </div>
            <div class="col-md-4">
                <ul class="list-inline social-buttons">
                    <li><a href="https://twitter.com/AgileVentures"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li><a href="https://www.facebook.com/agileventures"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/agileventures"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </section>
</footer>


</body>
</html>
