<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Rich Tapestry</title>

    <!-- Bootstrap Core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91621093-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>
<body class="x2017 x2017_05 x2017_05_08 x2017_05_08_rich-tapestry x2017_05_08_rich-tapestry_index">
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/#page-top"><img width="175" src="/images/av-logo-inverse.png" /></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="/#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#why-us">Why us?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#case-studies">Case Studies</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#subscribe">Subscribe</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
<section id="blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-2">
      </div>
      <div class="col-lg-8 text-left">
        <h2 class='title'><a href="/2017/05/08/rich-tapestry/">Rich Tapestry</a></h2>
        <h5 class='date'> 8 May 2017</h5>
    <p><img alt="rich_tapestry" src="/images/rich_tapestry.jpg" /></p>

<p>My brain was grabbling at titles for the blog/branch&ndash;&ldquo;webs we weave&rdquo;, &ldquo;elephants all the way down&rdquo;.  After nearly a year of blogging there&rsquo;s a haze about which expressions I&rsquo;ve used already and how well they express what I&rsquo;ll end up blogging about.  Not that titles can&rsquo;t or don&rsquo;t change through the subsequent editing process.  Last week was characterised by a series of edge of the seat devops activities.  Do I mean DevOps?  I guess I just mean installation of different components of the NHS wiki software.  One could characterise them as just part of the MediaWiki install process.  Looking back at them being all done it can be laid out as fairly straightforward, but any one of them could have turned out to be insoluble in the time available; and really I was pulling time out of other activities to sort the Apache, Parsoid and SSL configurations.</p>

<p>The system is live at <a href="https://wiki.healthylondon.org">https://wiki.healthylondon.org</a> and it loaded a bit sluggishly this morning, reloads were pretty prompt, and the Visual Editor is still working with the SSL.  After previous forays to get the Visual Editor working (Monday?) and SSL installed (Thursday?), it turned out that the Visual Editor wouldn&rsquo;t play well with the SSL.  It&rsquo;s difficult to say whether the Visual Editor is a &ldquo;nice to have&rdquo; or a &ldquo;must have&rdquo;, but losing it would have been a shame.  In total it took only about forty minutes to fix the Visual Editor to work with SSL on Friday.  It works with SSL on the main Wikipedia site, so my efforts were heartened by the idea that it was at least in principle possible to get it working.  However, hosting on Azure could have made it arbitrarily difficult to come up with a solution in a reasonable amount of time, and indeed I found several plaintive posts from people getting stuck on this, and those posts had no solution responses.</p>

<p>Again being with MediaWiki means we have an extensive online community and googling error messages gives leads pretty readily, but there was no &ldquo;out of the box&rdquo; solution that I could easily find.  In the end it took a reasoned analysis of the way the Parsoid system works.  The Visual Editor is a plugin that works within MediaWiki, but it needs to be able to translate pages from its own format to the MediaWiki syntax.  This used to be done via PHP script, but is now a stand alone node service (microservice).  Parsoid needs to be able to talk to the MediaWiki API and MediaWiki needs to be able to talk to the Parsoid service when starting up the Visual Editor.  The new SSL endpoints meant that the MediaWiki could no longer reach the Parsoid service.  I&rsquo;d like to give a more detailed walkthrough of the errors encountered etc., but I&rsquo;m feeling pretty run down today and there&rsquo;s a lot to get on to.  The executive summary is that I had to configure an additional virtual host in Apache to redirect through the security layer so that the Mediawiki Visual Editor pages could access Parsoid.  It also required opening an additional port in the Azure system.</p>

<p>What I&rsquo;d really like to do now is spend a full day re-creating the whole installation on a fresh Azure/Bitnami installation - documenting as I go.  However I&rsquo;ve got a meeting today and most days this week, getting together with other stakeholders the NHS has put me in touch with.  This is going to be, sort of, the final section of the design sprint, where I try to observe end user reactions to the &ldquo;prototype&rdquo; we&rsquo;ve created.  On the technical side I need to check on the backup solution we&rsquo;ve implemented, and it occurs to me that we could get the MediaWiki edits we&rsquo;re making into git or some other versioning system.  There&rsquo;s also replying to the lawyers about the updates to the terms &amp; conditions, preparing for a revised training session tomorrow (do we drop the ConfirmAccount plugin?), etc., etc.  From the design sprint perspective I guess I should focus on getting the look and feel finished to see end user reactions to that.</p>

<p>Okay, so the plan is:</p>

<ol>
<li>Check the backups are working</li>
<li>Focus on the look and feel</li>
<li>Start seeing the stakeholders</li>
</ol>

<p>Hopefully I can follow up with a full documentation of the install process, which might also make me less of a single point of failure if we have an issue with the configuration.  That said, I would ideally be doing the look and feel update on a staging instance; so maybe I can&rsquo;t get out of replicating the setup?  Of course the faster option is to just try design changes on the existing out of step staging instance we currently have.  Gah!  Life&rsquo;s rich tapestry indeed &hellip; I&rsquo;m going to make some coffee &hellip;</p>

        <h2 class='author'>by Sam Joseph</h2>
      </div>  
      <div class="col-lg-2">
      </div>
    </div>  
  </div>  
</section>  
<footer>
    <div class="container">
        <section id="contact">
        <div class="row">
            <div class="col-md-4">
                <h3>AgileVentures</h3>
                <p class="blurb text-muted">Our purpose is to develop better more affordable software solutions to enable non-profits to be more effective and more efficient. We also host a <a href="http://www.agileventures.org">learning community</a> around <a href="https://www.edx.org/xseries/agile-development-using-ruby-rails">free online courses</a> that enable developers to improve their team and software skills, and then to apply them on socially useful projects for non-profits. We are a Charitable Incorporated Organisation (CIO) in the UK. Ref #1170963</p>
            </div>
            <div class="col-md-4">
                <h3>What we do</h3>
                <div class="list">
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Websites</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Apps</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Process Automation</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Software Projects</span></i>
                </div>
                <h4>More on our <a href="/blog">Blog</a></h4>
            </div>
            <div class="col-md-4">
                <h3>Contact Us</h3>
                <div class="contact-list">
                  <!-- <i class="fa fa-envelope fa-lg fa-text fa-fw"><span class='font-override'>&nbsp;&nbsp;</i> -->
                  <i class="fa fa-lg fa-text"><a class='mail' href='mailto:nonprofits@agileventures.org'>nonprofits@<wbr>agileventures.org</a></span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>AgileVentures</span></i>
                  <!-- <i class="fa fa-map-marker fa-lg fa-text fa-fw"></i> -->
                  <i class="fa fa-lg fa-text"><span class='font-override'>The Lodge</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>64 Pinner Road</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>Harrow, HA1 4HZ</span></i>
                </div>
            </div>
        </div>
        </section>
        <div class="row">
            <div class="col-md-4">
                <ul class="list-inline quicklinks">
                    <li><a href="/privacy">Privacy Policy</a>
                    </li>
                    <li><a href="/terms">Terms of Use</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <span class="copyright">Copyright &copy; AgileVentures 2017</span>
            </div>
            <div class="col-md-4">
                <ul class="list-inline social-buttons">
                    <li><a href="https://twitter.com/AgileVentures"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li><a href="https://www.facebook.com/agileventures"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/agileventures"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </section>
</footer>


</body>
</html>
