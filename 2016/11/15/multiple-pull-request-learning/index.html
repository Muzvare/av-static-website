<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Multiple Pull Request Learning</title>

    <!-- Bootstrap Core CSS -->
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91621093-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>
<body class="x2016 x2016_11 x2016_11_15 x2016_11_15_multiple-pull-request-learning x2016_11_15_multiple-pull-request-learning_index">
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/#page-top"><img width="175" src="/images/av-logo-inverse.png" /></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="/#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#why-us">Why us?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#case-studies">Case Studies</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#subscribe">Subscribe</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
<section id="blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-2">
      </div>
      <div class="col-lg-8 text-left">
        <h2 class='title'><a href="/2016/11/15/multiple-pull-request-learning/">Multiple Pull Request Learning</a></h2>
        <h5 class='date'>15 Nov 2016</h5>
    <p>I didn&rsquo;t get much solo or pair time coding today. It was a day of helping Premium member&rsquo;s with bug fixes and reviewing pull requests.  The &ldquo;Martin Fowler&rdquo; scrum was crowded and brought up various requests for help, support and review.  I started by creating a hangout to look at Sasha&rsquo;s WSO pull request to check whether YouTube videos were valid before tweeting them.  Sasha was concerned whether he&rsquo;d sandboxed correctly, and I explained the <code>@vcr</code> tag we had that meant individual VCR cassettes weren&rsquo;t necessary.  More interestingly we were seeing that the tweets going out were slightly out of sync with their messages.  Sasha was investigating the issue of invalid YouTube links going into the tweets:</p>

<p><img alt="AV tweets" src="https://www.dropbox.com/s/845stvx878zuumo/Screenshot%202016-11-15%2009.23.27.png?dl=1" /></p>

<p>What we were seeing was that the tweets to post the hangout link and the finished video were both going out as soon as the hangout started.  Sometimes the person starting the hangout wouldn&rsquo;t press &ldquo;Start Broadcast&rdquo; so the YouTube video link would lead nowhere. There was no feature test covering this twitter functionality, and so I wrote one out:</p>
<pre class="highlight gherkin"><code><span class="kd">Feature</span><span class="p">:</span> Tweeting Live Events
  As a site admin
  In order to increase participation in events
  I would like live events to generate twitter notifications

  <span class="kn">Background</span><span class="p">:</span>
    <span class="nf">Given</span> an event <span class="s">"Scrum"</span>

  <span class="kn">Scenario</span><span class="p">:</span> Event going live causes tweet of hangout link to be sent
    <span class="nf">Given</span> that the HangoutConnection has pinged to indicate the event start
    <span class="nf">Then</span> an appropriate tweet has been sent  

  <span class="kn">Scenario</span><span class="p">:</span> Event stream going live causes tweet of the youtube stream to be sent
    <span class="nf">Given</span> that the HangoutConnection has pinged to indicate the event start
    <span class="nf">And</span> youtube stream has gone live
    <span class="nf">Then</span> an appropriate tweet has been sent <span class="c"># e.g. see live stream</span>

  <span class="kn">Scenario</span><span class="p">:</span> Broadcast termination causes tweet of the youtube URL to be sent
    <span class="nf">Given</span> that the HangoutConnection has pinged to indicate the event start
    <span class="nf">And</span> youtube stream has gone live
    <span class="nf">And</span> that recording has finished
    <span class="nf">Then</span> an appropriate tweet has been sent <span class="c"># e.g. see recording</span>
</code></pre>
<p>Sasha asked the important question of did we really want to be posting all this stuff to Twitter.  I guess the motivation is that by posting hangouts, live streams and videos to Twitter then we increase the chances that people will watch out videos and join our hangouts.  Looking at my YouTube traffic report for the last year I see that 5.3% of watch time on my video account comes from Twitter:</p>

<p><img alt="pie chart" src="https://www.dropbox.com/s/z66n3h4046zp3oi/Screenshot%202016-11-15%2009.32.54.png?dl=1" /></p>

<p><img alt="pie chart legend" src="https://www.dropbox.com/s/hjdtgfld0lph838/Screenshot%202016-11-15%2009.33.30.png?dl=1" /></p>

<p>compared to 60% from edX, 8.3% from Google search and 6.6% from the AV site itself.  While social media traffic to our AV site (over the last year) was dominated by Google+, Meetup, StackOverflow, Facebook and LinkedIn.  Twitter came in 8th with only 3.46%.  Now maybe this is because of broken video links, or because the feed is almost entirely automated. Either way, what we were putting out there was inconsistent, and the simplest fix was to only tweet the video link once the broadcast went live, and Sasha and I saw there was an easy check we could make for that through the YT gem.   Sasha had to run off to do a tech test; which made me think it would be awesome if tech companies would take AV participation as a tech test equivalent!</p>

<p>After lunch I merged an <a href="https://github.com/AgileVentures/LocalSupport/pull/396">exquisitely small and updated PR on LocalSupport</a> from new contributor Kostas and then jumped on an AsyncVoter performance testing issue, running a profile of the AsyncVoter app running on <a href="http://drie.co">drie</a> and heroku.  </p>
<pre class="highlight plaintext"><code>→ ab -n 50 https://async-voter-production.herokuapp.com/stories

Time per request:       381.987 [ms] (mean)

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      257  280   7.4    284     288
Processing:    92  102   7.3    100     130
Waiting:       92  102   7.3    100     129
Total:        353  382  11.8    384     414

Percentage of the requests served within a certain time (ms)
  50%    384
  66%    385
  75%    387
  80%    389
  90%    399
  95%    401
  98%    414
  99%    414
 100%    414 (longest request)
</code></pre>
<p>drie&rsquo;s average was slightly faster, but the variance was much larger:</p>
<pre class="highlight plaintext"><code>→ ab -n 50 http://master.async_voter_production.app.push.drieapp.co/stories

Time per request:       355.193 [ms] (mean, across all concurrent requests)

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       88   91   2.2     93      94
Processing:    92  264 474.9    100    3093
Waiting:       92  264 474.9    100    3093
Total:        180  355 475.1    193    3186

Percentage of the requests served within a certain time (ms)
  50%    193
  66%    196
  75%    220
  80%    486
  90%    881
  95%   1102
  98%   3186
  99%   3186
 100%   3186 (longest request)
</code></pre>
<p>This was a very rough test and not really fair on drie since we&rsquo;d just used both the apps, so Heroku was awake and didn&rsquo;t suffer a start up cost.  But drie currently sleeps their &ldquo;push&rdquo; apps every 30 seconds, which explains the variance and means we would suffer the slow start up costs much more frequently.  I was able to take that data to discuss with the drie folks in our regular catch up meeting.  No sooner was that done that I was on a bug hunt with new Premium member Rose, identifying issues with seed files and cucumber tests.  After we got the BURideShare cukes green, I took a quick pass through an <a href="https://github.com/strawberrycanyon/redeemify/pull/43">updated Redeemify pull request</a> which had been updated really nicely.  </p>

<p>I was trying to get a handle also on the new SHF-project, reviewing the new <a href="https://github.com/AgileVentures/shf-project/blob/develop/CONTRIBUTING.md">CONTRIBUTING.md</a> from Ashley and then joining a hangout with Ashley and Susanna who were discussing a <a href="https://github.com/AgileVentures/shf-project/pull/22">pull request</a>.  Susanna was keen to get it pulled in after having followed one set of advice from one mentor, but Ashley was concerned that things were getting too complex, and I was inclined to agree with her.  I offered what advice I could and then had to go to supper.  Bottom line is that it&rsquo;s okay to accrue technical debt from things like using non-RESTful controller methods, but it&rsquo;s good to be aware that you&rsquo;re doing that and that you&rsquo;ll pay a price later on.  If you&rsquo;ve got to move fast right now then guidelines can be ignored, but short term speed has to be balanced against long term progress.</p>

<p>In summary a productive day I think, although I didn&rsquo;t spend much time focused on one thing.  Great to see so many active projects on AgileVentures, and so much learning arising from all the pull requests coming in.  We just need lots more of this and lots of processes in place to ensure my head doesn&rsquo;t spin off trying to keep track of it all :-)</p>

<h3>Related Videos:</h3>

<ul>
<li><a href="https://www.youtube.com/watch?feature=player_embedded&amp;v=kkm2KdUDuC8">&ldquo;Martin Fowler&rdquo; Scrum</a></li>
<li><a href="https://www.youtube.com/watch?v=k4UrtG6Q0vw">WebSiteOne Code Review</a></li>
<li><a href="https://www.youtube.com/watch?v=rwc4luv4_6c">AsyncVoter Performance Testing</a></li>
<li><a href="https://www.youtube.com/watch?v=eNfi_j6BT0k">&ldquo;Kent Beck&rdquo; scrum</a></li>
<li><a href="https://www.youtube.com/watch?v=qjfV2_DFG18">Bug Hunt on BURideShare</a></li>
</ul>

        <h2 class='author'>by Sam Joseph</h2>
      </div>  
      <div class="col-lg-2">
      </div>
    </div>  
  </div>  
</section>  
<footer>
    <div class="container">
        <section id="contact">
        <div class="row">
            <div class="col-md-4">
                <h3>AgileVentures</h3>
                <p class="blurb text-muted">Our purpose is to develop better more affordable software solutions to enable non-profits to be more effective and more efficient. We also host a <a href="http://www.agileventures.org">learning community</a> around <a href="https://www.edx.org/xseries/agile-development-using-ruby-rails">free online courses</a> that enable developers to improve their team and software skills, and then to apply them on socially useful projects for non-profits. We are a Charitable Incorporated Organisation (CIO) in the UK. Ref #1170963</p>
            </div>
            <div class="col-md-4">
                <h3>What we do</h3>
                <div class="list">
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Websites</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Apps</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Process Automation</span></i>
                    <i class="fa fa-check fa-lg fa-text"><span class='font-override'>&nbsp;&nbsp;Software Projects</span></i>
                </div>
                <h4>More on our <a href="/blog">Blog</a></h4>
            </div>
            <div class="col-md-4">
                <h3>Contact Us</h3>
                <div class="contact-list">
                  <!-- <i class="fa fa-envelope fa-lg fa-text fa-fw"><span class='font-override'>&nbsp;&nbsp;</i> -->
                  <i class="fa fa-lg fa-text"><a class='mail' href='mailto:nonprofits@agileventures.org'>nonprofits@<wbr>agileventures.org</a></span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>AgileVentures</span></i>
                  <!-- <i class="fa fa-map-marker fa-lg fa-text fa-fw"></i> -->
                  <i class="fa fa-lg fa-text"><span class='font-override'>The Lodge</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>64 Pinner Road</span></i>
                  <i class="fa fa-lg fa-text"><span class='font-override'>Harrow, HA1 4HZ</span></i>
                </div>
            </div>
        </div>
        </section>
        <div class="row">
            <div class="col-md-4">
                <ul class="list-inline quicklinks">
                    <li><a href="/privacy">Privacy Policy</a>
                    </li>
                    <li><a href="/terms">Terms of Use</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <span class="copyright">Copyright &copy; AgileVentures 2017</span>
            </div>
            <div class="col-md-4">
                <ul class="list-inline social-buttons">
                    <li><a href="https://twitter.com/AgileVentures"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li><a href="https://www.facebook.com/agileventures"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/agileventures"><i class="fa fa-linkedin"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </section>
</footer>


</body>
</html>
